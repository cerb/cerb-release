{
    "name": "cerb.projectBoard.toolbar.task.find",
    "description": "Find tasks",
    "extension_id": "cerb.trigger.interaction.worker",
    "script": "inputs:\r\n  record/column:\r\n    record_type: project_board_column\r\n    required@bool: yes\r\n\r\nstart:\r\n  await:\r\n    form:\r\n      elements:\r\n        say/respond_jgnssn:\r\n          content@text:\r\n            ## Link tasks\r\n        sheet/prompt_tasks:\r\n          #label: Link tasks:\r\n          required@bool: yes\r\n          data:\r\n            automation:\r\n              uri: cerb:automation:cerb.data.records\r\n              inputs:\r\n                record_type: task\r\n                query_required@text:\r\n                  status:!c\r\n                  links.project_board_column:!(\r\n                    board.id:{{inputs.column.board_id}}\r\n                  )\r\n                  sort:-id\r\n          limit: 15\r\n          #default: option1\r\n          schema:\r\n            layout:\r\n              headings@bool: no\r\n              paging@bool: no\r\n              filtering@bool: yes\r\n              title_column: _label\r\n            columns:\r\n              selection/id:\r\n                params:\r\n                  mode: multiple\r\n              card/_label:\r\n                params:\r\n                  bold@bool: yes\r\n              date/created:\r\n              slider/importance:\r\n              card/owner__label:\r\n                params:\r\n                  image@bool: yes\r\n              #text/description:\r\n  \r\n  repeat:\r\n    each@key: prompt_tasks\r\n    as: task_id\r\n    do:\r\n      var.push:\r\n        inputs:\r\n          key: task_links\r\n          value: task:{{task_id}}\r\n  \r\n  record.update:\r\n    output: record_updated\r\n    inputs:\r\n      record_type: project_board_column\r\n      record_id: {{inputs.column.id}}\r\n      fields:\r\n        links@key: task_links\r\n          \r\n",
    "policy_kata": "callers:\r\n  cerb.toolbar.projectBoardColumn:\r\n    allow@bool:\r\n      {{\r\n        cerb_record_writeable('project_board', board_id, 'worker', worker_id) \r\n        ? 'yes'\r\n      }}\r\n\r\ncommands:\r\n  record.update:\r\n    allow: yes",
    "created_at": 1602026740,
    "updated_at": 1617997032
}