{
    "name": "cerb.ticket.move",
    "description": "An interaction for quickly moving tickets",
    "extension_id": "cerb.trigger.interaction.worker",
    "script": "inputs:\r\n  record/ticket:\r\n    record_type: ticket\r\n    required@bool: yes\r\n\r\nstart:\r\n  await/group:\r\n    form:\r\n      title: Move ticket\r\n      elements:\r\n        sheet/prompt_group_id:\r\n          label: To which group:\r\n          required@bool: yes\r\n          default: {{inputs.ticket.group_id}}\r\n          data:\r\n            automation:\r\n              uri: cerb:automation:cerb.data.records\r\n              inputs:\r\n                record_type: group\r\n                query_required: sort:name\r\n          schema:\r\n            layout:\r\n              filtering@bool: yes\r\n              headings@bool: no\r\n              paging@bool: yes\r\n            columns:\r\n              selection/id:\r\n                params:\r\n                  mode: single\r\n              card/_label:\r\n                label: Group\r\n                params:\r\n                  bold@bool: yes\r\n                  image@bool: yes\r\n                  underline@bool: no\r\n  \r\n  set/group:\r\n    group__context: group\r\n    group_id: {{prompt_group_id|round}}\r\n  \r\n  await/bucket:\r\n    form:\r\n      elements:\r\n        sheet/prompt_bucket_id:\r\n          label: To which bucket in {{group__label}}:\r\n          required@bool: yes\r\n          data:\r\n            automation:\r\n              uri: cerb:automation:cerb.data.records\r\n              inputs:\r\n                record_type: bucket\r\n                query_required@text,trim:\r\n                  group.id:{{prompt_group_id|round}} sort:name\r\n          default: {{group_default_bucket_id}}\r\n          schema:\r\n            layout:\r\n              filtering@bool: yes\r\n              headings@bool: no\r\n              paging@bool: yes\r\n            columns:\r\n              selection/id:\r\n                params:\r\n                  mode: single\r\n              card/_label:\r\n                label: Bucket\r\n                params:\r\n                  bold@bool: yes\r\n                  underline@bool: no\r\n\r\n  set/bucket:\r\n    bucket__context: bucket\r\n    bucket_id: {{prompt_bucket_id|round}}\r\n  \r\n  record.update/ticket:\r\n    output: updated_ticket\r\n    inputs:\r\n      # See: https://cerb.ai/docs/records/types/ticket/#records-api\r\n      record_type: ticket\r\n      record_id: {{inputs.ticket.id}}\r\n      fields:\r\n        group_id: {{bucket_group_id}}\r\n        bucket_id: {{bucket_id}}\r\n  \r\n  ",
    "policy_kata": "commands:\r\n  record.update:\r\n    deny/type@bool: {{inputs.record_type is not record type ('ticket')}}\r\n    deny/fields@bool: {{inputs.fields|keys is not same as ['group_id','bucket_id']}}\r\n    allow@bool: yes",
    "created_at": 1618365605,
    "updated_at": 1618436771
}